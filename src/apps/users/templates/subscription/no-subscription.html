{% extends "layout/main.html" %}
{% load static %}
{% block title %}
    Abonnement ändern – Bajkal
{% endblock title %}
{% block content %}
    {% load my_custom_filters %}
    <div class="px-4 pb-10 rounded-lg md:basis-9/12 basis-full h-fit">
        {% include "layout/partials/back-to-start.html" %}
        <nav class="flex" aria-label="Breadcrumb">
            <ol class="inline-flex items-center rtl:space-x-reverse">
                <li aria-current="page">
                    <a href="{% url 'settings' %}">
                        <span class="font-semibold text-gray-600 dark:text-gray-400 hover:text-gray-500">Einstellungen</span>
                    </a>
                </li>
                <li>
                    <div class="flex items-center">
                        {% include "icons/menu-right.html" %}
                        <span class="font-semibold text-gray-600 dark:text-gray-400">Abonnement ändern</span>
                    </div>
                </li>
            </ol>
        </nav>
        {% if BETA %}
            <div class="flex flex-col my-5 space-x-10 text-gray-800 dark:text-white">
                <div class="flex flex-col p-6 min-w-full bg-white rounded-lg border border-gray-50 shadow-sm dark:border-none dark:bg-gray-800 md:flex-row">
                    <div class="flex flex-col pt-4 pb-2 space-y-5 border-t border-gray-600 md:pl-6 md:border-0 md:pt-0">
                        <div>
                            <div class="text-gray-800 dark:text-gray-100">
                                <h5 class="mb-2 text-2xl font-semibold tracking-tight text-gray-800 dark:text-white">
                                    Karten
                                    synchronisieren
                                </h5>
                                <p class="mb-3 text-gray-600 dark:text-gray-300">
                                    Drücken Sie auf "Jetzt synchronisieren", um die Karten für Ihre
                                    Kurse zu erhalten.
                                </p>
                                <button hx-get="{% url 'synchronize_usercards' %}"
                                        hx-trigger="click"
                                        onclick="open_modal('sync_sub_modal')"
                                        hx-swap="outerHTML"
                                        hx-target="#body"
                                        class="px-3 py-2 text-sm font-semibold text-white bg-green-400 rounded-lg shadow-sm dark:bg-green-500 hover:bg-green-500 focus:ring-2 focus:outline-none focus:ring-green-600 active:dark:bg-green-500">
                                    Jetzt synchronisieren
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sync_sub_modal"
             data-modal-backdrop="static"
             tabindex="-1"
             aria-hidden="true"
             class="hidden overflow-y-auto overflow-x-hidden fixed inset-0 top-0 right-0 left-0 z-50 justify-center items-center w-full bg-white dark:bg-gray-900 /80">
            <div class="relative p-4 h-1/2 md:basis-1/3 basis-2/3">
                <div class="flex justify-center">
                    <div class="flex flex-col justify-center items-center p-6 bg-white rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-950">
                        <h5 class="pb-2 text-xl font-bold tracking-tight text-gray-800 dark:text-white">
                            Ihre Karten werden
                            synchronisiert.
                        </h5>
                        <div class="w-6 h-6 dark:fill-white fill-gray-950 spinner">{% include "icons/dots-circle.html" %}</div>
                    </div>
                </div>
            </div>
        </div>
        <script src="{% static 'js/ui/open_modal.js' %}"></script>
    {% else %}
        <div class="px-4 rounded-lg md:basis-9/12 basis-full h-fit">
            <div class="mb-4 text-xl font-bold text-gray-800 dark:text-white">Kein Abonnement</div>
        </div>
    {% endif %}
    <script src="{% static 'js/data/subscription.js' %}"></script>
{% endblock content %}
